## Лабораторная работа №4 ([другие задания](https://github.com/Ljts42/itmo-mt))
Сентемов Лев M33351

### Задание
#### Написание генератора парсеров
- [x] LL(1)-грамматики, нисходящий разбор
- [x] Поддержка синтезируемых атрибутов
- [x] Поддержка наследуемых атрибутов
- [x] Сгенерировать с помощью вашего генератора калькулятор
- [x] Выполнить с помощью вашего генератора ваше задание второй лабораторной
- [ ] ~~Выполнить с помощью вашего генератора ваше задание третьей лабораторной~~

### Описание
В `Lexer.hs` содержится лексер для грамматик.
```haskell
-- тип токенов грамматики для описания других грамматик
data TokenLex = ...
-- разбивает описание грамматики на токены
scanTokens :: String -> [TokenLex]
```
В `Grammar.hs` находятся вспомогательные типы `GramLexer` и `GramParser`, описывающие лексер и парсер соответственно. Также там реализовано вычисление множеств FIRST и FOLLOW и проверка грамматики на LL(1).

Из `Parser.y` с помощью генератора `happy` получаем парсер для грамматик.
```haskell
-- функции для получения лексера и парсера грамматики по списку токенов её описания
parseGrammar :: [TokenLex] -> (GramLexer, GramParser)
parseLexer :: [TokenLex] -> GramLexer
parseParser :: [TokenLex] -> GramParser
```

### Грамматика для описания грамматик
```haskell
-- описание лексера и парсера
StartR -> LexR SyntR
-- %Module% <, export> имя модуля, список для экспорта
-- <Stored> <Init> хранимый тип, значение для инициализации
-- <Returned> <Skip> тип токенов, значение токена отвечающего за пропуск
-- {Code} вставляемый код
-- описание токенов
LexR -> MODULEt TYPEt TYPEt TYPEt TYPEt TYPEt CODEt DescR
-- "regex" {code} регулярка и функция вызываемая при совпадении
-- тип функций (String -> State Stored [Returned])
DescR -> REGEXt CodeR DescR
DescR -> eps
CodeR -> CODEt
-- для пропуска ;
CodeR -> SEMICOLONt

-- %Module% <, export> имя модуля, список для экспорта
-- <Token> тип токенов в списке
-- t1 t2 ...; список токенов с константным конструктором
-- t1 t2 ...; список токенов, хранящих строку
-- {Code} код для вставки
-- описание грамматики
SyntR -> MODULEt TYPEt TYPEt TermsR TermsR CODEt GramR
-- список токенов, оканчивается ;
TermsR -> NAMEt TermsR
TermsR -> SEMICOLONt
-- NonTerm имя нетерминала
-- {Type} {Args} тип аргументов, список имен аргументов
-- : <Type> возвращаемое значение
-- список правил для нетерминала
GramR -> NAMEt TYPEt CODEt COLONt TYPEt RulesR GramR
GramR -> eps
-- | rule {code} правило и вызываемый после него код
RulesR -> VERTBARt ChildrenR CODEt RulesR
RulesR -> eps
-- Name<> для терминалов
-- Name<Args> имя и принимаемые аргументы
ChildrenR -> NAMEt TYPEt ChildrenR
CHildrenR -> eps
```

| Нетерминал | Описание                   |
|------------|----------------------------|
| StartR     | входной файл               |
| LexR       | лексический анализатор     |
| DescR      | описание токенов           |
| CodeR      | блок кода или пропуск      |
| SyntR      | синтаксический анализатор  |
| TermsR     | список токенов             |
| GramR      | описание грамматики        |
| RulesR     | список правил нетерминала  |
| ChildrenR  | правило                    |
